## نطاق التنفيذ
- بناء Web API حديث بـ .NET 8 وClean Architecture مع ربط SQL Server.
- وحدات مدمجة: الموظفون، الأقسام، المسميات الوظيفية، الحضور، الإجازات، الرواتب، الأداء، التوظيف، الوثائق، الإشعارات، التقارير.
- اعتماد REST كأساس مع خيار إضافة GraphQL لاحقًا.

## التقنيات والبنية
- ORM: EF Core 8؛ المصادقة: JWT + RBAC؛ التوثيق: Swagger/OpenAPI؛ الفحص: Health Checks؛ اللوج: Serilog؛ التتبع: OpenTelemetry؛ المهام الخلفية: Hangfire؛ التخزين المؤقت: Redis اختياري.
- طبقات: Api (Controllers) → Application (Services/DTO/Validation) → Domain (Entities/Events) → Infrastructure (DbContext/Repositories/Integrations).

## تصميم قواعد البيانات
- جداول أساسية: Employees, Departments, JobTitles, Users/Roles.
- حضور: AttendanceRecords, AttendanceRules.
- إجازات: LeaveTypes, LeaveRequests مع مسار موافقة.
- رواتب: PayrollPeriods, SalaryComponents, EmployeeSalaries.
- أداء: EvaluationPeriods, EvaluationForms, Evaluations.
- توظيف: JobOpenings, Candidates, Applications, Interviews.
- وثائق: Documents, DocumentCategories؛ إشعارات: NotificationTemplates, NotificationEvents, DeliveryLogs.
- فهارس رئيسية ومركبة؛ قيود تكامل؛ مراقبة التزامن.

## واجهات REST الأساسية
- `/api/v1/employees` CRUD مع تصفية وترقيم وفرز.
- `/api/v1/departments`, `/api/v1/job-titles` CRUD وروابط.
- `/api/v1/attendance` و`/api/v1/attendance/rules` CRUD واستعلامات بالتاريخ/الحالة.
- `/api/v1/leaves/types`, `/api/v1/leaves/requests` CRUD مع `approve/reject`.
- `/api/v1/payroll/periods`, `/api/v1/payroll/components`, معالجة `POST /api/v1/payroll/{periodId}/process` و`pay`.
- `/api/v1/evaluations/periods|forms|evaluations` CRUD و`submit`.
- `/api/v1/recruitment/openings|applications|interviews` CRUD و`advance`.
- `/api/v1/documents` رفع آمن؛ `/api/v1/reports/*` مخرجات PDF/CSV؛ `/api/v1/notifications/*` قوالب/إرسال.
- `/api/v1/auth/login`, `/api/v1/auth/me` مع سياسات الأدوار.

## الأمن والجودة
- HTTPS, HSTS, CORS مضبوط؛ JWT قصيرة العمر + Refresh؛ Rate Limiting؛ Audit Log للعمليات الحساسة.
- Validation صارم، حدود أحجام، فحص أنواع الملفات، إدارة الأسرار.

## الأداء والتوسع
- استعلامات إسقاطية، منع N+1، ترقيم من المصدر، فهارس محسنة.
- Cache للقراءات، Jobs للمهام الدورية، مراقبة الأداء.

## الاختبارات والتوثيق
- وحدات: Services/Validators/Mappers.
- تكامل: Controllers عبر WebApplicationFactory + Testcontainers SQL Server.
- تحميل: k6 للواجهات الحرجة.
- Swagger/OpenAPI مع أمثلة، توثيق سياسات الأدوار.

## خطة العمل المرحلية
- المرحلة 1: إنشاء الهيكل، Auth/JWT، Swagger، وحدات Employees/Departments/JobTitles.
- المرحلة 2: الحضور والإجازات مع مسار الموافقة وربط القواعد.
- المرحلة 3: الرواتب معالجة وإصدار قسائم وربط الإشعارات.
- المرحلة 4: الأداء والتوظيف وربط التدفقات.
- المرحلة 5: الوثائق، التقارير، الإشعارات، تحسينات GraphQL إن لزم.
- المرحلة 6: تحسين الأداء، اختبارات تحميل، صقل الأمان، تجهيز CI/CD وDocker.

## مخرجات التنفيذ
- Web API جاهز مع توثيق Swagger، اختبارات وحدات/تكامل، إعدادات نشر، ودليل تشغيل وصيانة.

يرجى تأكيد البدء بالتنفيذ وفق هذه الخطة المعتمدة.